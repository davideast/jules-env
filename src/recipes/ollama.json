{
  "name": "ollama",
  "description": "Ollama with configurable model",
  "installSteps": [
    {
      "id": "install-zstd",
      "label": "Install zstd",
      "cmd": "sudo apt-get update && sudo apt-get install -y zstd",
      "checkCmd": "dpkg -s zstd"
    },
    {
      "id": "install-ollama",
      "label": "Install Ollama",
      "cmd": "curl -fsSL https://ollama.com/install.sh | sh",
      "checkCmd": "which ollama"
    },
    {
      "id": "enable-ollama",
      "label": "Enable Ollama service",
      "cmd": "if command -v systemctl >/dev/null 2>&1; then sudo systemctl daemon-reload && sudo systemctl enable --now ollama; else nohup ollama serve > /tmp/ollama.log 2>&1 & fi",
      "checkCmd": "curl -sf http://localhost:11434/ >/dev/null 2>&1"
    },
    {
      "id": "wait-for-ollama",
      "label": "Wait for Ollama to initialize",
      "cmd": "for i in 1 2 3 4 5 6 7 8 9 10; do curl -sf http://localhost:11434/ >/dev/null 2>&1 && exit 0; sleep 1; done; echo 'Ollama server did not start'; exit 1"
    },
    {
      "id": "pull-model",
      "label": "Pull {{preset}} model",
      "cmd": "ollama pull {{preset}}",
      "checkCmd": "ollama list | grep {{preset}}"
    }
  ],
  "env": {
    "OLLAMA_HOST": "http://localhost:11434"
  },
  "paths": []
}
